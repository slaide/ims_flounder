<!DOCTYPE html>
<html lang="eng">
   <head>
      <title>Room overview</title>
      <meta charset="UTF-8">
      <link rel="stylesheet" type="text/css" href="./reset.css">
      <link rel="stylesheet" type="text/css" href="./flounder.css">
   </head>

   <body>
      <!--Navigation menu for users-->
      <nav class="menu">
         <ul>
            <li><a href="#">Book an instrument</a></li>
            <li><a href="#">My Schedule</a></li>
            <li><a href="#">Administrator</a></li>
            <li><a href="#">Maintenance</a></li>
         </ul>
      </nav>
      
      <main>

         <div id="room_overview"></div>
         <!--Might not be necessary in the end, appendChild to room-buttons-->
         <div class="instruments"></div>

         <script>

            function getRooms() {
               var xhttp = new XMLHttpRequest();
               xhttp.open("GET", "room.json", true);
               xhttp.onreadystatechange = function() {
                  if (this.readyState == 4 && this.status == 200) {
                     //Just some try I did for a "fake" json file
                     //Should be an easier way to choose values of variables in json file?? than doing this loop
                     for (let i = 14; i <= this.responseText.length; i = i+16) {
                        let overview = document.querySelector('#room_overview');
                        let room = document.createElement('button');
                           room.setAttribute('type', 'button');
                           room.setAttribute('onclick', 'getIns()');
                           room.setAttribute('class','room');
                           room.innerHTML = 'ROOM ' + this.responseText[i];
                        overview.appendChild(room); 
                     }
                  }  
               };
               xhttp.send();
            }

            
            //Function for showing instruments when a room button is clicked
            //Add input to function, perhaps room id, which would indicate the instruments to display
            function getIns() {
              var xhttp = new XMLHttpRequest();
              xhttp.onreadystatechange = function() {
                if (this.readyState == 4 && this.status == 200) {
                  //document.getElementById("demo").innerHTML = this.responseText; 
                  //Can we retrive responseText as something from server or database
                  document.querySelector('.instruments').innerHTML = 'Centrifuge';
                }
              };
              //Need to have a filename
              xhttp.open("GET", "ins", true);
              xhttp.send();
            }

            getRooms();
         </script>

      </main>

   </body>
</html>